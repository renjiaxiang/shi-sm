<?php
 defined("\x49\x4e\x5f\x49\101") or exit("\101\x63\143\145\163\x73\x20\104\145\156\x69\x65\x64"); class orderHandler extends WeModuleSite { public function goodsxiajia($goodsid) { goto vR0Xr; yeFjf: $pingnopaysql = "\x75\x70\144\141\x74\145\40" . tablename("\x6c\142\x73\x68\137\x70\x69\x6e\147\x6f\x72\x64\x65\x72") . "\x20\x61\x20\152\157\x69\156\40" . tablename("\x6c\142\163\150\x5f\x70\151\x6e\x67\x6f\x72\x64\145\x72\147\157\157\144\x73") . "\40\x62\40\157\156\x20\x61\x2e\151\x64\75\142\x2e\x6f\162\x64\x65\162\137\x69\x64\x20\x73\145\164\40\141\x2e\160\164\x5f\163\164\x61\x74\165\163\x3d\64\x2c\x61\x2e\x73\x74\141\164\165\163\x3d\x37\40\167\150\x65\x72\x65\x20\x61\x2e\x75\x6e\151\141\143\x69\x64\75" . $_W["\x75\x6e\x69\141\x63\151\x64"] . "\40\x61\156\144\40\141\x2e\151\163\137\160\141\171\75\x30\40\x61\x6e\x64\40\141\x2e\151\x73\x5f\147\162\157\165\160\x3d\61\x20\141\156\x64\x20\141\56\151\163\137\x73\x75\x63\x63\145\163\163\75\x30\x20\x61\156\144\40\141\56\x70\164\137\163\164\x61\164\165\x73\75\61\40\x61\156\144\40\x62\56\147\157\x6f\144\x73\137\151\144\75" . $goodsid; goto K59FB; RbWmo: $sql = "\163\x65\154\145\143\164\40\x61\x2e\x2a\x2c\142\x2e\x67\x72\157\x75\160\x5f\x6e\x75\x6d\x20\146\x72\157\155\40" . tablename("\154\142\x73\x68\137\x70\x69\156\147\157\x72\x64\145\162") . "\40\141\40\x6a\x6f\x69\156\x20" . tablename("\154\142\163\150\x5f\x70\x69\156\147\157\x72\144\145\162\x67\x6f\157\x64\163") . "\x20\x62\40\157\x6e\x20\x61\56\x69\144\75\142\56\x6f\x72\x64\x65\162\137\x69\144\x20\167\x68\145\x72\x65\x20\x61\56\x69\163\x5f\160\x61\x79\x3d\61\40\x61\x6e\x64\x20\x61\56\x70\141\162\x65\x6e\x74\137\x69\144\x3d\60\40\x61\x6e\x64\x20\x61\x2e\151\x73\137\x67\x72\x6f\165\160\75\x31\40\x61\156\144\x20\141\x2e\151\163\x5f\163\165\x63\143\x65\163\x73\x3d\x30\x20\141\156\x64\40\141\56\160\x74\x5f\x73\x74\x61\164\165\x73\x3d\x32\40\141\x6e\x64\x20\x62\x2e\147\x6f\157\x64\163\x5f\x69\144\75" . $goodsid; goto c0eXq; qXkHN: $uniacid = $_W["\x75\156\151\x61\143\151\x64"]; goto xqhOj; vR0Xr: global $_W, $_GPC; goto yeFjf; xqhOj: $sms = pdo_get("\x6c\142\x73\150\x5f\x73\x6d\163", array("\x75\156\x69\x61\143\151\144" => $_W["\x75\x6e\x69\141\143\151\144"])); goto zRcVl; yM2Ap: foreach ($res as $k => $v) { goto pjrAb; HmeLe: $yct[] = $v; goto hqJDT; pjrAb: $yct = pdo_getall("\154\142\163\x68\x5f\160\x69\x6e\x67\157\x72\x64\145\x72", array("\160\141\162\145\156\x74\x5f\x69\x64" => $v["\x69\144"], "\160\164\137\x73\164\x61\x74\165\x73" => 2)); goto HmeLe; mktMt: foreach ($yct as $k2 => $v2) { goto ohbpM; YJ8Yh: WD8Wn: goto bk3XC; FG1SD: $ok = false; goto t5uwd; IWkYq: $out_trade_no = $v2["\164\x72\x61\x64\x65\156\157"]; goto y6E_a; tjK1f: $upserwallet = pdo_update("\x6c\142\163\x68\137\x75\x73\x65\x72", array("\x77\141\x6c\x6c\x65\x74\40\x2b\75" => $tui_money), array("\x69\144" => $v2["\165\x73\145\x72\137\x69\144"])); goto LwF0z; Azijg: $users = pdo_get("\154\x62\x73\150\x5f\x75\163\x65\162", array("\x69\x64" => $v2["\x75\x73\x65\162\x5f\151\x64"])); goto kkdr2; KmUki: $mes["\153\x65\171\167\157\x72\x64\x37"] = date("\131\55\155\55\x64\x20\x48\x3a\151\x3a\x73", time()); goto FBepe; atcZS: if (!($money > 0)) { goto q0Bu_; } goto IWkYq; ty6m1: $addqbmxres = pdo_insert("\154\142\x73\x68\x5f\161\x62\155\x78", $addqbmx); goto mYqhL; aGoor: $mes["\x70\141\147\x65"] = "\x6a\x79\137\x6c\142\x73\150\x2f\160\x61\147\x65\163\x2f\151\x6e\x64\x65\170\57\x69\156\144\x65\x78"; goto A5aSV; f09XY: if (!$ok) { goto WD8Wn; } goto mK7WH; QHRL4: $money = $v2["\160\x61\171\x5f\x6d\x6f\156\x65\x79"]; goto KLouh; FKNEf: ltSbQ: goto oHojn; JDUJG: $mes["\153\x65\x79\x77\x6f\162\x64\x32"] = $v2["\x67\x6e\x61\155\145"]; goto iq8LB; vS_3g: $addqbmx["\x74\151\x6d\145"] = date("\131\55\x6d\55\x64\x20\110\x3a\x69\x3a\x73"); goto ty6m1; bk3XC: xnNbn: goto QocQH; FBepe: $formwork = "\x7b\15\xa\x20\x20\40\40\40\x20\40\40\40\x20\40\40\40\40\40\40\40\x20\x20\x20\40\x20\40\x20\40\40\40\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\40\40\x20\40\40\x20\x20\40\x20\40\x22\x74\x6f\x75\163\x65\162\x22\72\x20\42" . $mes["\x6f\x70\x65\156\151\x64"] . "\42\x2c\15\xa\x20\40\x20\40\x20\x20\x20\x20\40\x20\40\40\40\x20\x20\x20\40\x20\40\x20\x20\x20\x20\40\x20\x20\x20\40\x20\x20\x20\40\x20\40\x20\40\40\x20\x20\40\40\x20\x20\x20\40\x20\40\40\x22\x74\145\x6d\160\154\141\164\145\x5f\x69\144\42\72\x20\x22" . $mes["\155\142\x69\144"] . "\42\x2c\xd\xa\40\40\x20\40\x20\40\x20\x20\40\x20\x20\40\40\40\x20\40\x20\x20\x20\40\40\40\x20\40\40\x20\40\40\x20\40\x20\x20\x20\x20\x20\40\40\x20\x20\40\40\x20\40\x20\40\40\40\40\x22\160\141\x67\x65\x22\x3a\42" . $mes["\x70\x61\x67\145"] . "\x22\x2c\x20\15\xa\x20\x20\40\40\40\40\x20\x20\x20\40\x20\x20\x20\40\x20\40\x20\x20\x20\40\40\40\x20\40\x20\x20\x20\40\x20\x20\x20\40\x20\x20\x20\x20\40\40\x20\x20\x20\40\40\40\x20\40\x20\40\x22\x64\141\164\x61\x22\x3a\x20\x7b\xd\12\40\40\x20\40\40\x20\40\40\x20\40\40\40\x20\40\40\40\x20\x20\x20\40\x20\x20\40\x20\x20\x20\40\x20\x20\x20\40\x20\40\x20\x20\x20\x20\x20\x20\40\40\x20\x20\40\40\x20\40\x20\40\40\x20\40\x22\164\150\x69\x6e\147\61\x22\x3a\x20\173\xd\xa\40\x20\40\40\40\40\40\40\x20\40\40\x20\x20\x20\x20\40\40\x20\40\x20\x20\x20\x20\x20\40\x20\40\x20\x20\40\40\x20\x20\40\40\40\x20\x20\x20\x20\40\40\x20\40\40\40\40\40\40\40\40\x20\40\x20\x20\x20\42\x76\x61\154\x75\145\42\72\40\42" . $mes["\x6b\x65\171\x77\157\162\144\x32"] . "\x22\xd\xa\40\x20\x20\40\40\x20\40\40\40\x20\40\x20\40\x20\40\40\x20\x20\x20\x20\40\40\x20\40\x20\40\x20\40\x20\40\x20\x20\x20\40\x20\40\40\40\x20\40\40\40\x20\40\40\40\x20\40\40\x20\x20\40\175\x2c\15\xa\x20\40\40\40\40\x20\x20\x20\40\x20\x20\40\40\x20\40\40\x20\40\40\40\x20\40\40\x20\x20\x20\40\40\40\x20\x20\x20\x20\x20\x20\40\x20\x20\40\40\x20\40\40\40\40\40\x20\x20\x20\40\x20\x20\x22\x64\141\164\x65\x32\42\72\x20\x7b\xd\12\40\x20\x20\x20\x20\x20\x20\40\x20\x20\x20\40\40\40\40\40\40\40\x20\40\40\x20\x20\40\40\40\40\x20\x20\40\x20\40\x20\40\40\x20\x20\40\40\x20\x20\40\x20\40\x20\x20\40\40\40\40\40\x20\x20\x20\40\40\42\x76\x61\x6c\x75\x65\x22\72\42" . $mes["\153\145\171\167\x6f\162\x64\x33"] . "\42\15\xa\40\40\x20\x20\x20\x20\x20\x20\40\x20\x20\x20\x20\40\40\40\x20\40\x20\40\x20\x20\40\x20\x20\x20\x20\x20\x20\40\40\x20\40\x20\40\x20\x20\x20\40\40\x20\x20\40\40\40\40\x20\40\x20\40\x20\x20\x7d\54\xd\12\x20\40\x20\x20\x20\40\40\x20\x20\40\40\40\40\x20\x20\40\40\x20\x20\x20\40\x20\x20\40\x20\x20\40\40\x20\x20\40\40\x20\x20\x20\x20\x20\40\40\40\40\40\40\x20\x20\40\40\40\40\40\40\40\42\x74\150\x69\156\147\66\42\x3a\x20\173\xd\xa\40\x20\40\40\x20\40\x20\40\40\40\x20\40\40\40\40\40\40\40\40\40\40\40\x20\x20\40\x20\x20\x20\40\x20\x20\x20\40\40\40\x20\x20\x20\x20\x20\40\40\x20\40\x20\40\40\x20\40\40\40\40\x20\x20\40\40\42\166\x61\x6c\165\x65\42\72\x20\42" . $mes["\153\x65\x79\x77\x6f\x72\144\64"] . "\x22\xd\12\40\40\x20\40\x20\40\40\40\40\x20\x20\40\40\40\40\40\40\x20\x20\x20\40\x20\40\x20\x20\40\40\x20\x20\40\40\40\x20\x20\40\x20\x20\x20\x20\x20\x20\40\40\40\40\40\40\x20\x20\x20\40\x20\175\54\xd\12\40\40\40\40\x20\x20\40\x20\40\x20\x20\x20\x20\x20\40\x20\x20\40\40\40\x20\x20\40\40\x20\40\40\x20\40\x20\40\40\40\x20\x20\40\x20\x20\40\40\40\40\40\x20\40\x20\x20\40\40\x20\40\40\42\x63\150\141\x72\x61\x63\x74\x65\162\137\x73\164\x72\151\156\147\71\x22\72\40\173\15\12\40\40\40\40\x20\x20\40\x20\x20\40\x20\x20\x20\40\x20\x20\40\40\40\x20\x20\40\40\40\x20\x20\40\40\x20\x20\x20\x20\x20\40\x20\x20\40\40\x20\x20\40\40\x20\x20\40\x20\40\40\40\40\x20\40\x20\x20\40\x20\x22\x76\x61\x6c\x75\145\x22\72\x20\42" . $mes["\x6b\x65\x79\167\157\162\144\x35"] . "\x22\xd\xa\40\40\40\x20\x20\x20\x20\40\x20\40\40\x20\40\40\40\40\40\x20\40\x20\x20\x20\40\x20\40\x20\x20\x20\40\40\x20\x20\x20\40\x20\x20\x20\x20\x20\40\x20\40\40\x20\40\x20\x20\x20\40\x20\40\x20\175\x2c\15\12\40\x20\x20\40\x20\40\40\40\x20\40\40\40\x20\40\x20\x20\x20\40\40\x20\40\x20\x20\x20\x20\40\x20\40\x20\40\40\40\x20\x20\x20\x20\40\40\40\x20\x20\40\40\40\40\x20\x20\40\x20\40\x20\40\x22\x74\150\151\156\147\70\42\72\x20\173\xd\xa\x20\40\x20\x20\x20\x20\40\x20\40\40\x20\x20\40\x20\x20\x20\x20\x20\x20\x20\40\40\x20\40\x20\x20\x20\x20\x20\40\40\40\x20\x20\40\x20\40\40\x20\x20\40\x20\x20\40\40\x20\x20\40\40\x20\x20\40\40\x20\x20\x20\42\166\x61\x6c\x75\145\x22\72\x20\42" . $mes["\x6b\145\171\x77\x6f\162\x64\x36"] . "\x22\xd\xa\40\40\x20\40\x20\x20\x20\x20\x20\40\40\40\x20\40\x20\40\40\40\40\40\x20\40\40\40\x20\40\x20\40\x20\40\x20\x20\40\40\40\40\40\x20\40\40\40\40\40\x20\x20\x20\40\40\x20\x20\40\40\175\15\xa\40\40\40\40\40\40\40\x20\40\x20\40\x20\40\40\40\40\40\x20\x20\x20\x20\40\40\x20\x20\40\40\40\x20\x20\40\40\x20\x20\40\x20\x20\x20\40\40\40\40\40\x20\x20\40\x20\40\175\40\x20\15\12\x20\40\x20\x20\40\40\x20\40\40\x20\x20\x20\40\x20\40\x20\x20\40\x20\x20\x20\40\x20\40\40\x20\40\40\40\40\40\x20\x20\x20\x20\x20\x20\x20\40\x20\x20\x20\x20\40\175"; goto fTjk3; oHojn: YSWTd: goto YJ8Yh; FDTYy: $addqbmx["\x6d\157\x6e\x65\171"] = $tui_money; goto OQgUv; iq8LB: $mes["\x6b\145\171\167\x6f\162\x64\63"] = date("\x59\55\x6d\55\x64\40\110\72\151\x3a\163", $v["\141\144\x64\164\x69\x6d\x65"]); goto KNyHx; OTFNZ: $mes["\157\160\x65\156\x69\144"] = $users["\157\x70\x65\156\x69\x64"]; goto jMGTL; LwF0z: if (!$upserwallet) { goto fY9Rt; } goto FDTYy; KLouh: $ok = true; goto atcZS; hOLz3: $tui_money = $v2["\x6d\157\156\x65\171"] - $money; goto t5PHk; KNyHx: $mes["\153\145\x79\167\x6f\x72\144\x34"] = $v2["\x67\162\x6f\x75\160\x5f\156\165\155"]; goto YSrDM; xeCZr: pdo_query($sql3); goto hOLz3; M3opS: $mes["\x6b\x65\x79\167\157\162\x64\x36"] = "\xe4\272\272\xe6\225\xb0\344\xb8\215\350\xb6\xb3"; goto KmUki; YSrDM: $mes["\x6b\145\171\167\157\x72\x64\x35"] = $v2["\157\162\144\145\162\x6e\x6f"]; goto M3opS; Ym386: q0Bu_: goto f09XY; jMGTL: $mes["\155\142\x69\x64"] = $sms["\x70\164\137\x73\142"]; goto aGoor; A5aSV: $mes["\x6b\x65\171\167\x6f\162\144\x31"] = $users["\x6e\x61\155\x65"]; goto JDUJG; t5uwd: ZQjY0: goto Ym386; mYqhL: fY9Rt: goto GWn6R; fTjk3: echo $this->global_send_template($formwork, $token); goto FKNEf; BZPOC: $addqbmx["\x6e\x6f\164\145"] = "\345\x8e\x9f\350\xb7\xaf\xe9\200\x80\xe5\x9b\236"; goto vS_3g; QocQH: AQ4kK: goto MPNaL; GWn6R: if (empty($addqbmxres)) { goto ltSbQ; } goto Azijg; hKo2b: $addqbmx["\x74\171\160\145"] = 1; goto BZPOC; t5PHk: if (!($tui_money > 0)) { goto YSWTd; } goto tjK1f; XZF3S: if (!($tkres2 != 1)) { goto ZQjY0; } goto FG1SD; kkdr2: $mes = []; goto OTFNZ; mK7WH: $sql3 = "\165\x70\x64\x61\x74\x65\x20" . tablename("\154\142\x73\x68\137\x70\x69\x6e\x67\x6f\162\x64\145\162") . "\x20\x73\145\x74\x20\x70\x74\x5f\163\164\141\x74\165\x73\x3d\64\x2c\163\x74\141\164\165\x73\75\x37\40\x77\150\145\x72\x65\x20\x75\x6e\x69\x61\143\151\144\x3d" . $_W["\165\156\x69\141\143\151\144"] . "\40\x61\156\x64\x20\x69\144\75" . $v2["\x69\x64"]; goto xeCZr; ohbpM: if (!($v2["\x70\x74\137\x73\164\x61\164\x75\163"] == 2)) { goto xnNbn; } goto QHRL4; y6E_a: $tkres2 = $this->wxtk_func($v2["\151\144"], $uniacid, $money, $out_trade_no); goto XZF3S; OQgUv: $addqbmx["\165\x73\145\x72\137\151\x64"] = $v2["\165\163\x65\162\137\151\144"]; goto hKo2b; MPNaL: } goto ETrm1; GhO71: VcpWH: goto s02Fp; ETrm1: Ua36Z: goto eoWsb; hqJDT: if (!(count($yct) < $v["\147\x72\157\x75\x70\x5f\x6e\x75\x6d"])) { goto gmaFz; } goto mktMt; eoWsb: gmaFz: goto GhO71; s02Fp: } goto LTo1u; VuD1Z: $token = $this->global_gettoken($_GPC, $_W); goto yM2Ap; LTo1u: v1gaK: goto h0fwp; K59FB: pdo_query($pingnopaysql); goto PwJ0T; bQIyN: pdo_query($tuannopaysql); goto RbWmo; zRcVl: if (!$res) { goto xRAj6; } goto VuD1Z; c0eXq: $res = pdo_fetchall($sql); goto qXkHN; PwJ0T: $tuannopaysql = "\165\x70\x64\x61\x74\145\40" . tablename("\154\142\163\150\137\x70\151\x6e\x67\157\x72\144\x65\162") . "\40\x61\x20\x6a\157\x69\x6e\40" . tablename("\154\142\163\x68\x5f\x70\151\x6e\x67\157\162\144\145\162\147\x6f\x6f\x64\x73") . "\40\142\40\157\x6e\x20\x61\x2e\151\144\75\x62\56\157\x72\144\x65\x72\x5f\151\x64\x20\163\145\x74\40\x61\56\x73\x74\141\x74\165\163\x3d\67\40\x77\x68\x65\162\145\x20\x61\56\165\156\x69\x61\143\x69\144\75" . $_W["\165\x6e\x69\141\143\x69\x64"] . "\x20\x61\156\144\x20\x61\x2e\151\163\x5f\160\141\x79\x3d\60\x20\141\156\144\40\141\56\x69\163\x5f\x67\x72\x6f\165\160\75\60\x20\x61\x6e\144\40\141\56\163\164\x61\x74\165\x73\75\61\40\141\x6e\x64\40\x62\x2e\147\157\x6f\144\x73\x5f\x69\144\x3d" . $goodsid; goto bQIyN; h0fwp: xRAj6: goto GkA_0; GkA_0: } function wxtk_func($id, $uniacid, $money, $out_trade_no, $refund_account = "\x52\105\x46\125\x4e\104\x5f\123\x4f\x55\x52\x43\x45\x5f\x55\116\123\105\124\x54\x4c\x45\x44\x5f\106\125\116\104\x53") { goto OjN1U; NcSz1: $mchid = $res["\155\143\x68\151\144"]; goto YDnGy; F_tuT: $key = $res["\x77\x78\153\x65\171"]; goto NcSz1; T36yq: return 2; goto YseCs; kKD_o: $path_cert = IA_ROOT . "\x2f\141\144\x64\x6f\156\163\57\x6a\x79\137\x6c\x62\163\150\57\x63\x65\162\164\x2f" . "\x61\160\x69\x63\x6c\x69\145\156\x74\x5f\143\145\x72\x74\137" . $uniacid . "\x2e\160\x65\x6d"; goto xC0Ov; U5USx: try { goto u7cnn; sGzQs: return 1; goto AUm9o; g47Xu: return $this->wxtk_func($id, $uniacid, $money, $out_trade_no, $refund_account); goto IUF3g; HSP3W: zSBT1: goto VLJND; NIkeX: if ($result["\162\x65\163\x75\154\x74\x5f\x63\x6f\x64\145"] == "\x53\125\103\103\105\x53\x53") { goto XYjCe; } goto BFg2b; yEeZ5: goto JIEqF; goto PBAqs; VKKgu: $refund_account = "\122\105\106\125\116\104\x5f\x53\x4f\125\122\103\x45\137\x52\x45\103\110\101\122\107\x45\137\106\125\116\x44\x53"; goto g47Xu; IUF3g: r4uYf: goto xcRs7; mXz2a: $config->SetKey($key); goto HHHyJ; xcRs7: YKOac: goto Lkfnr; uOJ76: if (!($refund_account == "\x52\105\x46\125\116\x44\137\x53\117\125\x52\103\x45\x5f\122\105\103\110\x41\x52\x47\x45\137\x46\x55\116\x44\x53")) { goto zSBT1; } goto Y0PTl; h9mZv: $result = $WxPayApi->refund($config, $input, 60); goto NIkeX; VLJND: if (!($refund_account == "\122\105\106\x55\x4e\104\137\x53\x4f\125\122\103\x45\x5f\x55\116\123\x45\124\x54\114\x45\x44\137\x46\x55\116\104\123")) { goto r4uYf; } goto VKKgu; u7cnn: include_once IA_ROOT . "\x2f\x61\x64\144\157\x6e\163\x2f\x6a\x79\x5f\154\x62\x73\150\57\x70\141\171\x6d\x65\156\164\x2f\x72\x65\146\x75\156\144\x2f\127\x78\120\x61\171\56\x43\157\x6e\x66\151\147\x2e\x70\150\x70"; goto ntoAj; HHHyJ: $config->SetSSLCertPath($path_cert, $path_key); goto h9mZv; Lkfnr: return 3; goto yEeZ5; Y0PTl: pdo_update("\154\142\163\150\x5f\163\171\x73\164\x65\x6d", array("\151\163\137\145\x6d\x61\151\x6c" => 1), array("\x69\x64" => $res["\151\144"])); goto jabm8; AUm9o: JIEqF: goto jwxCd; PBAqs: XYjCe: goto sGzQs; Ffs2b: $config->SetMerchantId($mchid); goto mXz2a; jabm8: return 4; goto HSP3W; BFg2b: if (!($result["\145\162\x72\x5f\x63\157\x64\145"] == "\116\117\124\105\116\x4f\x55\107\110")) { goto YKOac; } goto uOJ76; kub0r: $config->SetAppId($appid); goto Ffs2b; ntoAj: $config = new WxPayConfig(); goto kub0r; jwxCd: } catch (Exception $e) { return 2; } goto EXrkX; pWEJq: $input = new WxPayRefund(); goto kKD_o; sVME1: $input->SetMch_id($mchid); goto gZIA2; OjN1U: include_once IA_ROOT . "\57\x61\144\x64\x6f\156\x73\x2f\x6a\171\137\154\x62\163\x68\57\160\141\171\155\145\x6e\164\57\x72\145\x66\165\156\x64\x2f\127\170\120\141\x79\56\101\x70\151\x2e\160\150\160"; goto jxmtq; jxmtq: $WxPayApi = new WxPayApi(); goto pWEJq; YDnGy: if (!(empty($appid) || empty($mchid) || empty($key) || empty($res["\x77\170\x6b\145\171"]) || !file_exists($path_cert) || !file_exists($path_key))) { goto WCluo; } goto T36yq; xC0Ov: $path_key = IA_ROOT . "\57\141\144\144\157\156\x73\x2f\x6a\x79\x5f\154\x62\x73\x68\57\143\x65\x72\164\x2f" . "\141\x70\151\x63\x6c\x69\145\x6e\164\x5f\x6b\145\171\x5f" . $uniacid . "\56\160\x65\155"; goto go0gY; kkVlv: $input->SetAppid($appid); goto sVME1; yFLfu: $appid = $res["\x61\x70\160\x69\x64"]; goto F_tuT; Iafi_: $input->SetOut_trade_no($out_trade_no); goto U5USx; YseCs: WCluo: goto wxZdv; AHK8s: $input->SetOut_refund_no($id); goto Iafi_; wxZdv: $fee = $money * 100; goto kkVlv; esF7L: $input->SetTotal_fee($fee); goto AHK8s; go0gY: $res = getSystemCache(); goto yFLfu; gZIA2: $input->SetOp_user_id($mchid); goto tfZLh; tfZLh: $input->SetRefund_fee($fee); goto Wehy_; Wehy_: $input->SetRefund_account($refund_account); goto esF7L; EXrkX: } function global_gettoken($_GPC, $_W) { goto MnZHq; Tkf43: $data = json_decode($data, true); goto sPTcV; oZyAu: $appid = $res["\141\160\160\x69\144"]; goto a0XZd; M07W9: $data = curl_exec($ch); goto VFNMk; sPTcV: return $data["\141\143\143\x65\163\163\x5f\x74\x6f\153\145\x6e"]; goto doJhn; a0XZd: $secret = $res["\141\x70\x70\163\145\143\x72\x65\x74"]; goto JKJPP; JKJPP: $url = "\x68\x74\x74\160\x73\x3a\57\x2f\141\160\151\56\167\x65\151\x78\151\x6e\x2e\161\x71\x2e\143\157\155\x2f\143\147\x69\55\142\x69\156\x2f\x74\x6f\x6b\x65\x6e\77\x67\x72\x61\x6e\x74\137\164\x79\x70\145\x3d\x63\x6c\x69\145\x6e\x74\137\x63\162\145\x64\x65\156\164\151\141\x6c\x26\141\160\x70\151\144\x3d" . $appid . "\46\163\145\143\x72\145\164\75" . $secret . ''; goto wac8h; uclwT: curl_setopt($ch, CURLOPT_RETURNTRANSFER, 1); goto ttMfl; ttMfl: curl_setopt($ch, CURLOPT_SSL_VERIFYPEER, 0); goto M07W9; B9y3k: curl_setopt($ch, CURLOPT_URL, $url); goto uclwT; wac8h: $ch = curl_init(); goto B9y3k; VFNMk: curl_close($ch); goto Tkf43; MnZHq: $res = pdo_get("\x6c\x62\x73\150\137\x73\171\163\164\145\155", array("\x75\156\x69\x61\143\151\144" => $_W["\165\x6e\151\x61\x63\151\x64"])); goto oZyAu; doJhn: } function global_send_template($formwork, $token) { goto oCHnC; FnAD5: curl_setopt($ch, CURLOPT_POSTFIELDS, $formwork); goto PuxTG; mtF68: curl_setopt($ch, CURLOPT_POST, 1); goto FnAD5; aXFzG: curl_setopt($ch, CURLOPT_URL, $url); goto xoZXb; PuxTG: $data = curl_exec($ch); goto aq40h; pzZwt: $ch = curl_init(); goto aXFzG; xoZXb: curl_setopt($ch, CURLOPT_RETURNTRANSFER, 1); goto TGcIx; TGcIx: curl_setopt($ch, CURLOPT_SSL_VERIFYPEER, 0); goto mtF68; aq40h: curl_close($ch); goto HV0ig; oCHnC: $url = "\x68\x74\x74\x70\x73\x3a\x2f\57\x61\160\x69\56\x77\x65\151\170\151\x6e\56\x71\x71\56\x63\x6f\x6d\57\143\x67\151\x2d\142\x69\x6e\x2f\x6d\145\x73\163\141\x67\145\x2f\163\x75\142\163\x63\x72\x69\142\145\x2f\x73\145\x6e\x64\x3f\141\143\143\145\163\163\x5f\164\x6f\153\x65\x6e\x3d" . $token . ''; goto pzZwt; HV0ig: } }